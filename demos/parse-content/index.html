<!DOCTYPE html>

<html>
<head>
	<script src="../../build/aui/aui.js" type="text/javascript"></script>

	<link rel="stylesheet" href="../../build/aui-skin-classic/css/aui-skin-classic-all-min.css" type="text/css" media="screen" />

	<style type="text/css">

		.grey-background {
			background-color: #666;
		}

	</style>
</head>

<body>

<h1>Alloy - Parse Content</h1>

<p><div id="demo1"></div></p>
<p><div id="demo2"></div></p>
<p><div id="demo3"></div></p>
<p><div id="demo4"></div></p>

<script type="text/javascript">

var index = 0;

AUI().ready('aui-parse-content', function(A) {
	var node1 = A.one('#demo1');
	var node2 = A.one('#demo2');
	var node3 = A.one('#demo3');
	var node4 = A.one('#demo4');

	var contentURL = 'assets/content.html';

	// after plug the ParseContent, it will parse the internal script/css content

	var demoIO = {
		url: contentURL
	};

	var demoIOSuccess = {
		ioConfig: {
			on: {
				success: function(id, o) {
					node2.addClass('grey-background');

					node2.setContent('I have a grey background.');
				}
			}
		},
		url: contentURL
	};

	var demoIOFailure = {
		ioConfig: {
			on: {
				failure: function (id, o) {
					node3.setContent('failure config test: ' + 'resource not available');
				}
			}
		},
		url: 'no_such_file.html'
	};

	var demoConfigOptions = {
		ioConfig: {
			method: 'GET',
			on: {
				success: function(id, o) {
					node4.setContent('using method \'GET\'...' + '<br/>' + o.responseText);
				}
			}
		},
		url: contentURL
	};

	var ParseContent = A.Plugin.ParseContent;

	node1.plug(ParseContent, demoIO);
	node2.plug(ParseContent, demoIOSuccess);
	node3.plug(ParseContent, demoIOFailure);
	node4.plug(ParseContent, demoConfigOptions);

	// var html = 'textNode<' + 'script src="assets/external.js"></' + 'script>anyNode<span>span</span>';
	// var frag = document.createElement('div');
	// frag.innerHTML = html;

	// or using append...
	// node.append(html);
	// node.append(frag);
});

</script>
</body>
</html>